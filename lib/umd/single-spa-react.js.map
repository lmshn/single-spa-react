{"version":3,"file":"single-spa-react.js","sources":["../../node_modules/dom-element-getter-helpers/lib/dom-element-getter-helpers.js","../../src/single-spa-react.js"],"sourcesContent":["function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function chooseDomElementGetter(opts, props) {\n  var domElementGetter;\n\n  if (props.domElement) {\n    domElementGetter = function domElementGetter() {\n      return props.domElement;\n    };\n  } else if (props.domElementGetter) {\n    domElementGetter = props.domElementGetter;\n  } else if (opts.domElementGetter) {\n    domElementGetter = opts.domElementGetter;\n  } else {\n    domElementGetter = defaultDomElementGetter(props);\n  }\n\n  if (typeof domElementGetter !== \"function\") {\n    throw Error(\"single-spa's dom-element-getter-helpers was given an invalid domElementGetter for application or parcel '\".concat(props.name, \"'. Expected a function, received \").concat(_typeof(domElementGetter)));\n  }\n\n  return function () {\n    var domElement = domElementGetter(props);\n\n    if (!(domElement instanceof HTMLElement)) {\n      throw Error(\"single-spa's dom-element-getter-helpers: domElementGetter returned an invalid dom element for application or parcel '\".concat(props.name, \"'. Expected HTMLElement, received \").concat(_typeof(domElement)));\n    }\n\n    return domElement;\n  };\n}\n\nfunction defaultDomElementGetter(props) {\n  var appName = props.appName || props.name;\n\n  if (!appName) {\n    throw Error(\"single-spa's dom-element-getter-helpers was not given an application name as a prop, so it can't make a unique dom element container for the react application\");\n  }\n\n  var htmlId = \"single-spa-application:\".concat(appName);\n  return function defaultDomEl() {\n    var domElement = document.getElementById(htmlId);\n\n    if (!domElement) {\n      domElement = document.createElement(\"div\");\n      domElement.id = htmlId;\n      document.body.appendChild(domElement);\n    }\n\n    return domElement;\n  };\n}\n","/* We don't import parcel.component.js from this file intentionally. See comment\r\n * in that file for why\r\n */\r\n\r\nimport { chooseDomElementGetter } from \"dom-element-getter-helpers\";\r\n\r\n// React context that gives any react component the single-spa props\r\nexport let SingleSpaContext = null;\r\n\r\n// This try/catch exists mostly to prevent rollup from thinking that SingleSpaContext\r\n// is null and then doing optimizations in parcel.js that cause bugs.\r\n// See https://github.com/single-spa/single-spa-react/issues/105\r\n\r\ntry {\r\n  // single-spa-react is usable as a global script, as a systemjs module, and other\r\n  // situations where require() is unavailable. This is why we require the user to\r\n  // pass in opts.React and opts.ReactDOM - to avoid the mess of \"how do i properly load react\".\r\n  // However, in situations where require() is available, we can use it this way to create\r\n  // the react context. The try/catch defensiveness keeps single-spa-react working in\r\n  // as many situations as possible.\r\n  SingleSpaContext = require(\"react\").createContext();\r\n} catch {\r\n  // ignore\r\n}\r\n\r\nconst defaultOpts = {\r\n  // required opts\r\n  React: null,\r\n\r\n  // required - one or the other\r\n  ReactDOM: null,\r\n  ReactDOMClient: null,\r\n\r\n  // required - one or the other\r\n  rootComponent: null,\r\n  loadRootComponent: null,\r\n\r\n  // optional opts\r\n  renderType: \"createRoot\",\r\n  errorBoundary: null,\r\n  errorBoundaryClass: null,\r\n  domElementGetter: null,\r\n  parcelCanUpdate: true, // by default, allow parcels created with single-spa-react to be updated\r\n  suppressComponentDidCatchWarning: false,\r\n  domElements: {},\r\n  renderResults: {},\r\n  updateResolves: {},\r\n  unmountResolves: {},\r\n};\r\n\r\nexport default function singleSpaReact(userOpts) {\r\n  if (typeof userOpts !== \"object\") {\r\n    throw new Error(`single-spa-react requires a configuration object`);\r\n  }\r\n\r\n  const opts = {\r\n    ...defaultOpts,\r\n    ...userOpts,\r\n  };\r\n\r\n  if (!opts.React) {\r\n    throw new Error(`single-spa-react must be passed opts.React`);\r\n  }\r\n\r\n  if (!opts.ReactDOM && !opts.ReactDOMClient) {\r\n    throw new Error(\r\n      `single-spa-react must be passed opts.ReactDOM or opts.ReactDOMClient`\r\n    );\r\n  }\r\n\r\n  if (!opts.rootComponent && !opts.loadRootComponent) {\r\n    throw new Error(\r\n      `single-spa-react must be passed opts.rootComponent or opts.loadRootComponent`\r\n    );\r\n  }\r\n\r\n  if (opts.errorBoundary && typeof opts.errorBoundary !== \"function\") {\r\n    throw Error(\r\n      `The errorBoundary opt for single-spa-react must either be omitted or be a function that returns React elements`\r\n    );\r\n  }\r\n\r\n  if (!SingleSpaContext && opts.React.createContext) {\r\n    SingleSpaContext = opts.React.createContext();\r\n  }\r\n\r\n  opts.SingleSpaRoot = createSingleSpaRoot(opts);\r\n\r\n  const lifecycles = {\r\n    bootstrap: bootstrap.bind(null, opts),\r\n    mount: mount.bind(null, opts),\r\n    unmount: unmount.bind(null, opts),\r\n  };\r\n\r\n  if (opts.parcelCanUpdate) {\r\n    lifecycles.update = update.bind(null, opts);\r\n  }\r\n\r\n  return lifecycles;\r\n}\r\n\r\nfunction bootstrap(opts, props) {\r\n  if (opts.rootComponent) {\r\n    // This is a class or stateless function component\r\n    return Promise.resolve();\r\n  } else {\r\n    // They passed a promise that resolves with the react component. Wait for it to resolve before mounting\r\n    return opts.loadRootComponent(props).then((resolvedComponent) => {\r\n      opts.rootComponent = resolvedComponent;\r\n    });\r\n  }\r\n}\r\n\r\nfunction mount(opts, props) {\r\n  return new Promise((resolve, reject) => {\r\n    if (\r\n      !opts.suppressComponentDidCatchWarning &&\r\n      atLeastReact16(opts.React) &&\r\n      !opts.errorBoundary &&\r\n      !opts.errorBoundaryClass\r\n    ) {\r\n      if (!opts.rootComponent.prototype) {\r\n        console.warn(\r\n          `single-spa-react: ${\r\n            props.name || props.appName || props.childAppName\r\n          }'s rootComponent does not implement an error boundary.  If using a functional component, consider providing an opts.errorBoundary to singleSpaReact(opts).`\r\n        );\r\n      } else if (!opts.rootComponent.prototype.componentDidCatch) {\r\n        console.warn(\r\n          `single-spa-react: ${\r\n            props.name || props.appName || props.childAppName\r\n          }'s rootComponent should implement componentDidCatch to avoid accidentally unmounting the entire single-spa application.`\r\n        );\r\n      }\r\n    }\r\n\r\n    const whenMounted = function () {\r\n      resolve(this);\r\n    };\r\n\r\n    const elementToRender = getElementToRender(opts, props, whenMounted);\r\n    const domElement = chooseDomElementGetter(opts, props)();\r\n    const renderResult = reactDomRender({\r\n      elementToRender,\r\n      domElement,\r\n      reactDom: getReactDom(opts),\r\n      renderType: getRenderType(opts),\r\n    });\r\n\r\n    opts.domElements[props.name] = domElement;\r\n    opts.renderResults[props.name] = renderResult;\r\n  });\r\n}\r\n\r\nfunction unmount(opts, props) {\r\n  return new Promise((resolve) => {\r\n    opts.unmountResolves[props.name] = resolve;\r\n\r\n    const root = opts.renderResults[props.name];\r\n\r\n    if (root && root.unmount) {\r\n      // React >= 18\r\n      const unmountResult = root.unmount();\r\n    } else {\r\n      // React < 18\r\n      getReactDom(opts).unmountComponentAtNode(opts.domElements[props.name]);\r\n    }\r\n    delete opts.domElements[props.name];\r\n    delete opts.renderResults[props.name];\r\n  });\r\n}\r\n\r\nfunction update(opts, props) {\r\n  return new Promise((resolve) => {\r\n    if (!opts.updateResolves[props.name]) {\r\n      opts.updateResolves[props.name] = [];\r\n    }\r\n\r\n    opts.updateResolves[props.name].push(resolve);\r\n\r\n    const elementToRender = getElementToRender(opts, props, null);\r\n    const renderRoot = opts.renderResults[props.name];\r\n    if (renderRoot && renderRoot.render) {\r\n      // React 18 with ReactDOM.createRoot()\r\n      renderRoot.render(elementToRender);\r\n    } else {\r\n      // React 16 / 17 with ReactDOM.render()\r\n      const domElement = chooseDomElementGetter(opts, props)();\r\n      // This is the old way to update a react application - just call render() again\r\n      getReactDom(opts).render(elementToRender, domElement);\r\n    }\r\n  });\r\n}\r\n\r\nfunction atLeastReact16(React) {\r\n  if (\r\n    React &&\r\n    typeof React.version === \"string\" &&\r\n    React.version.indexOf(\".\") >= 0\r\n  ) {\r\n    const majorVersionString = React.version.slice(\r\n      0,\r\n      React.version.indexOf(\".\")\r\n    );\r\n    try {\r\n      return Number(majorVersionString) >= 16;\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction getReactDom(opts) {\r\n  return opts.ReactDOMClient || opts.ReactDOM;\r\n}\r\n\r\nfunction getRenderType(opts) {\r\n  return typeof opts.renderType === \"function\"\r\n    ? opts.renderType()\r\n    : opts.renderType;\r\n}\r\n\r\nfunction reactDomRender({ reactDom, renderType, elementToRender, domElement }) {\r\n  const renderFn = reactDom[renderType];\r\n  if (typeof renderFn !== \"function\")\r\n    throw new Error(`renderType \"${renderType}\" did not return a function.`);\r\n\r\n  switch (renderType) {\r\n    case \"createRoot\":\r\n    case \"unstable_createRoot\":\r\n    case \"createBlockingRoot\":\r\n    case \"unstable_createBlockingRoot\": {\r\n      const root = renderFn(domElement);\r\n      root.render(elementToRender);\r\n      return root;\r\n    }\r\n    case \"hydrateRoot\": {\r\n      const root = renderFn(domElement, elementToRender);\r\n      return root;\r\n    }\r\n    case \"hydrate\":\r\n    default: {\r\n      renderFn(elementToRender, domElement);\r\n      // The renderRoot function should return a react root, but ReactDOM.hydrate() and ReactDOM.render()\r\n      // do not return a react root. So instead, we return null which indicates that there is no react root\r\n      // that can be used for updates or unmounting\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nfunction getElementToRender(opts, props, mountFinished) {\r\n  const rootComponentElement = opts.React.createElement(\r\n    opts.rootComponent,\r\n    props\r\n  );\r\n\r\n  let elementToRender = SingleSpaContext\r\n    ? opts.React.createElement(\r\n        SingleSpaContext.Provider,\r\n        { value: props },\r\n        rootComponentElement\r\n      )\r\n    : rootComponentElement;\r\n\r\n  if (\r\n    opts.errorBoundary ||\r\n    props.errorBoundary ||\r\n    opts.errorBoundaryClass ||\r\n    props.errorBoundaryClass\r\n  ) {\r\n    opts.errorBoundaryClass =\r\n      opts.errorBoundaryClass ||\r\n      props.errorBoundaryClass ||\r\n      createErrorBoundary(opts, props);\r\n    elementToRender = opts.React.createElement(\r\n      opts.errorBoundaryClass,\r\n      props,\r\n      elementToRender\r\n    );\r\n  }\r\n\r\n  // https://github.com/single-spa/single-spa-react/issues/112\r\n  elementToRender = opts.React.createElement(\r\n    opts.SingleSpaRoot,\r\n    {\r\n      ...props,\r\n      mountFinished,\r\n      updateFinished() {\r\n        if (opts.updateResolves[props.name]) {\r\n          opts.updateResolves[props.name].forEach((r) => r());\r\n          delete opts.updateResolves[props.name];\r\n        }\r\n      },\r\n      unmountFinished() {\r\n        if (opts.unmountResolves[props.name]) {\r\n          opts.unmountResolves[props.name]();\r\n          delete opts.unmountResolves[props.name];\r\n        }\r\n      },\r\n    },\r\n    elementToRender\r\n  );\r\n\r\n  return elementToRender;\r\n}\r\n\r\nfunction createErrorBoundary(opts, props) {\r\n  // Avoiding babel output for class syntax and super()\r\n  // to avoid bloat\r\n  function SingleSpaReactErrorBoundary(props) {\r\n    // super\r\n    opts.React.Component.apply(this, arguments);\r\n\r\n    this.state = {\r\n      caughtError: null,\r\n      caughtErrorInfo: null,\r\n    };\r\n\r\n    SingleSpaReactErrorBoundary.displayName = `SingleSpaReactErrorBoundary(${props.name})`;\r\n  }\r\n\r\n  SingleSpaReactErrorBoundary.prototype = Object.create(\r\n    opts.React.Component.prototype\r\n  );\r\n\r\n  SingleSpaReactErrorBoundary.prototype.render = function () {\r\n    if (this.state.caughtError) {\r\n      const errorBoundary = opts.errorBoundary || props.errorBoundary;\r\n\r\n      return errorBoundary(\r\n        this.state.caughtError,\r\n        this.state.caughtErrorInfo,\r\n        this.props\r\n      );\r\n    } else {\r\n      return this.props.children;\r\n    }\r\n  };\r\n\r\n  SingleSpaReactErrorBoundary.prototype.componentDidCatch = function (\r\n    err,\r\n    info\r\n  ) {\r\n    this.setState({\r\n      caughtError: err,\r\n      caughtErrorInfo: info,\r\n    });\r\n  };\r\n\r\n  return SingleSpaReactErrorBoundary;\r\n}\r\n\r\nfunction createSingleSpaRoot(opts) {\r\n  // This is a class component, since we need a mount hook and single-spa-react supports React@15 (no useEffect available)\r\n  function SingleSpaRoot(_props) {\r\n    SingleSpaRoot.displayName = `SingleSpaRoot(${_props.name})`;\r\n  }\r\n\r\n  SingleSpaRoot.prototype = Object.create(opts.React.Component.prototype);\r\n  SingleSpaRoot.prototype.componentDidMount = function () {\r\n    setTimeout(this.props.mountFinished);\r\n  };\r\n  SingleSpaRoot.prototype.componentWillUnmount = function () {\r\n    setTimeout(this.props.unmountFinished);\r\n  };\r\n  SingleSpaRoot.prototype.render = function () {\r\n    // componentDidUpdate doesn't seem to be called during root.render() for updates\r\n    setTimeout(this.props.updateFinished);\r\n\r\n    return this.props.children;\r\n  };\r\n\r\n  return SingleSpaRoot;\r\n}\r\n"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","chooseDomElementGetter","opts","props","domElementGetter","domElement","appName","name","Error","htmlId","concat","document","getElementById","createElement","id","body","appendChild","defaultDomElementGetter","HTMLElement","SingleSpaContext","require","createContext","_unused","defaultOpts","React","ReactDOM","ReactDOMClient","rootComponent","loadRootComponent","renderType","errorBoundary","errorBoundaryClass","parcelCanUpdate","suppressComponentDidCatchWarning","domElements","renderResults","updateResolves","unmountResolves","bootstrap","Promise","resolve","then","resolvedComponent","mount","reject","version","indexOf","majorVersionString","slice","Number","err","atLeastReact16","componentDidCatch","console","warn","childAppName","elementToRender","getElementToRender","this","renderResult","_ref","reactDom","renderFn","root","render","reactDomRender","getReactDom","getRenderType","unmount","unmountComponentAtNode","update","push","renderRoot","mountFinished","rootComponentElement","Provider","value","SingleSpaReactErrorBoundary","Component","apply","arguments","state","caughtError","caughtErrorInfo","displayName","Object","create","children","info","setState","createErrorBoundary","SingleSpaRoot","_objectSpread","updateFinished","forEach","r","unmountFinished","userOpts","_props","componentDidMount","setTimeout","componentWillUnmount","createSingleSpaRoot","lifecycles","bind"],"mappings":"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"}